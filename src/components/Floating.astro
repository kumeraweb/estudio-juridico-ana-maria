---
import { CONTACT_CONFIG, WHATSAPP_URL } from '../data/config'
---

<a
  href={WHATSAPP_URL}
  class="floating-contact"
  aria-label="Contacto por WhatsApp"
  data-track-contact="whatsapp"
  target="_blank"
  rel="noopener noreferrer"
>
  <span class="floating-label">
    <span class="floating-dot" aria-hidden="true"></span>
    Estoy en línea
  </span>
  <svg
    width="22"
    height="22"
    viewBox="0 0 24 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path
      d="M20.52 3.48A11.82 11.82 0 0 0 12.02 0C5.39 0 .02 5.37.02 12a11.9 11.9 0 0 0 1.67 6.1L0 24l6.08-1.6a11.92 11.92 0 0 0 5.94 1.52h.01c6.63 0 12-5.37 12-12a11.86 11.86 0 0 0-3.5-8.44Zm-8.5 18.3a9.94 9.94 0 0 1-5.08-1.39l-.36-.21-3.6.95.96-3.5-.24-.36A9.94 9.94 0 1 1 12.02 21.78Zm5.48-7.44c-.3-.15-1.76-.87-2.03-.97-.27-.1-.46-.15-.65.15-.2.3-.75.97-.92 1.17-.17.2-.34.22-.64.07-.3-.15-1.25-.46-2.38-1.47-.88-.78-1.47-1.75-1.64-2.05-.17-.3-.02-.46.13-.61.13-.13.3-.34.45-.5.15-.17.2-.28.3-.47.1-.2.05-.37-.02-.52-.07-.15-.65-1.57-.9-2.15-.24-.57-.48-.5-.65-.51h-.55c-.2 0-.52.07-.8.37-.27.3-1.05 1.03-1.05 2.52s1.08 2.94 1.23 3.14c.15.2 2.13 3.26 5.16 4.57.72.31 1.28.5 1.72.64.72.23 1.38.2 1.9.12.58-.09 1.76-.72 2.01-1.41.25-.69.25-1.28.17-1.41-.07-.13-.27-.2-.57-.35Z"
      fill="currentColor"></path>
  </svg>
</a>

<div class="mobile-sticky-contact" aria-label="Contacto rápido móvil">
  <a
    href={WHATSAPP_URL}
    class="mobile-sticky-contact__item mobile-sticky-contact__item--primary"
    data-track-contact="whatsapp"
    target="_blank"
    rel="noopener noreferrer"
  >
    WhatsApp
  </a>
  <a
    href={`tel:${CONTACT_CONFIG.phone.raw}`}
    class="mobile-sticky-contact__item"
    data-track-contact="phone"
  >
    Llamar
  </a>
  <a href="/contacto" class="mobile-sticky-contact__item">Formulario</a>
</div>

<style>
  .floating-contact {
    position: fixed;
    bottom: 1.25rem;
    right: 1.25rem;
    z-index: 80;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem;
    height: 56px;
    padding: 0 1.1rem 0 0.9rem;
    border-radius: 999px;
    background: #25d366;
    color: #0b3d21;
    border: 1px solid rgba(0, 0, 0, 0.08);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    transition:
      transform 220ms ease,
      background 220ms ease,
      box-shadow 220ms ease;
    box-shadow: 0 18px 40px rgba(10, 78, 45, 0.35);
  }

  .floating-contact:hover {
    transform: translateY(-2px);
    background: #1fbf5b;
    box-shadow: 0 22px 55px rgba(0, 0, 0, 0.45);
  }

  .floating-contact:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.45);
  }

  .floating-label {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.75rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  .floating-dot {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: #0b3d21;
    box-shadow: 0 0 0 4px rgba(11, 61, 33, 0.2);
  }

  @media (max-width: 768px) {
    .floating-contact {
      display: none;
    }
  }

  .mobile-sticky-contact {
    display: none;
  }

  @media (max-width: 768px) {
    .mobile-sticky-contact {
      position: fixed;
      left: 0.75rem;
      right: 0.75rem;
      bottom: 0.75rem;
      z-index: 90;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 0.5rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 14px;
      background: rgba(14, 42, 66, 0.42);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 12px 32px rgba(8, 24, 40, 0.4);
      padding: 0.45rem;
    }

    .mobile-sticky-contact__item {
      min-height: 42px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.24);
      color: rgba(255, 255, 255, 0.95);
      font-size: 0.78rem;
      font-weight: 600;
      text-decoration: none;
      background: rgba(255, 255, 255, 0.08);
    }

    .mobile-sticky-contact__item--primary {
      background: #25d366;
      border-color: #25d366;
      color: #0b3d21;
    }
  }
</style>

<style is:global>
  @media (max-width: 768px) {
    body {
      padding-bottom: 5.25rem;
    }
  }
</style>
